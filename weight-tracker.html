<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kilo Takibi - GRINDMIND</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="favicon.ico" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
      /* Reset ve Temel Stiller */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary-bg: #ffffff;
        --secondary-bg: #f8fafc;
        --card-bg: #ffffff;
        --accent-color: #2563eb;
        --accent-hover: #1d4ed8;
        --accent-light: #eff6ff;
        --success-color: #10b981;
        --warning-color: #f59e0b;
        --danger-color: #ef4444;
        --info-color: #06b6d4;
        --text-primary: #1e293b;
        --text-secondary: #64748b;
        --text-muted: #94a3b8;
        --border-color: #e2e8f0;
        --border-hover: #cbd5e1;
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, sans-serif;
        background: var(--primary-bg);
        color: var(--text-primary);
        line-height: 1.6;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Header Stilleri */
      .header {
        background: var(--card-bg);
        border-bottom: 1px solid var(--border-color);
        box-shadow: var(--shadow-sm);
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 0;
      }

      .logo {
        font-size: 1.5rem;
        font-weight: 800;
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .logo:hover {
        transform: scale(1.05);
      }

      .back-btn {
        padding: 8px 16px;
        background: transparent;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        color: var(--text-secondary);
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9rem;
        font-weight: 500;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .back-btn:hover {
        background: #6366f1;
        color: white;
        border-color: #6366f1;
      }

      /* Ana ƒ∞√ßerik */
      .main-content {
        padding: 40px 0 60px;
        min-height: calc(100vh - 80px);
      }

      .page-header {
        text-align: center;
        margin-bottom: 40px;
      }

      .page-title {
        font-size: clamp(2rem, 5vw, 2.5rem);
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 12px;
      }

      .page-subtitle {
        font-size: clamp(1rem, 3vw, 1.2rem);
        color: var(--text-secondary);
        max-width: 600px;
        margin: 0 auto;
      }

      /* Dashboard Grid */
      .dashboard-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 24px;
        margin-bottom: 32px;
      }

      .quick-add-section {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 16px;
        padding: 24px;
        box-shadow: var(--shadow-sm);
        transition: all 0.3s ease;
      }

      .quick-add-section:hover {
        box-shadow: var(--shadow-md);
        border-color: var(--accent-color);
      }

      .section-title {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .input-row {
        display: flex;
        gap: 12px;
        margin-bottom: 16px;
      }

      .input-group {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .input-label {
        font-size: 0.85rem;
        color: var(--text-secondary);
        font-weight: 500;
      }

      .weight-input {
        padding: 12px 16px;
        background: var(--secondary-bg);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        color: var(--text-primary);
        font-size: 1rem;
        transition: all 0.3s ease;
        width: 100%;
      }

      .weight-input:focus {
        outline: none;
        border-color: var(--accent-color);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      }

      .unit-selector {
        padding: 12px 16px;
        background: var(--secondary-bg);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        color: var(--text-primary);
        font-size: 1rem;
        cursor: pointer;
        min-width: 80px;
      }

      .add-weight-btn {
        width: 100%;
        padding: 12px 20px;
        background: var(--accent-color);
        color: white;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1rem;
      }

      .add-weight-btn:hover {
        background: var(--accent-hover);
        transform: translateY(-1px);
        box-shadow: var(--shadow-md);
      }

      /* Current Stats */
      .current-stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
        margin-bottom: 20px;
      }

      .stat-card {
        background: var(--secondary-bg);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 16px;
        text-align: center;
        transition: all 0.3s ease;
      }

      .stat-card:hover {
        background: var(--accent-light);
        border-color: var(--accent-color);
        transform: translateY(-2px);
      }

      .stat-value {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 4px;
        display: block;
      }

      .stat-value.current {
        color: var(--accent-color);
      }

      .stat-value.target {
        color: var(--accent-color);
      }

      .stat-value.change {
        color: var(--success-color);
      }

      .stat-value.change.negative {
        color: var(--danger-color);
      }

      .stat-label {
        font-size: 0.85rem;
        color: var(--text-muted);
        font-weight: 500;
      }

      /* BMI ve Boy Bilgisi */
      .additional-stats {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }

      .stat-card-wide {
        background: var(--secondary-bg);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 16px;
        text-align: center;
        transition: all 0.3s ease;
      }

      .stat-card-wide:hover {
        background: var(--accent-light);
        border-color: var(--accent-color);
        transform: translateY(-2px);
      }

      /* Grafik ve ƒ∞statistikler */
      .analytics-section {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 24px;
        margin-bottom: 32px;
      }

      .chart-container {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 16px;
        padding: 24px;
        box-shadow: var(--shadow-sm);
      }

      .chart-wrapper {
        position: relative;
        height: 300px;
        width: 100%;
      }

      .progress-section {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 16px;
        padding: 24px;
        box-shadow: var(--shadow-sm);
      }

      .progress-item {
        margin-bottom: 20px;
      }

      .progress-item:last-child {
        margin-bottom: 0;
      }

      .progress-label {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
        font-size: 0.9rem;
        color: var(--text-secondary);
      }

      .progress-bar {
        width: 100%;
        height: 8px;
        background: var(--border-color);
        border-radius: 4px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(
          90deg,
          var(--accent-color),
          var(--accent-hover)
        );
        border-radius: 4px;
        transition: width 0.5s ease;
      }

      /* Ge√ßmi≈ü Kayƒ±tlar */
      .history-section {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 16px;
        padding: 24px;
        box-shadow: var(--shadow-sm);
      }

      .history-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .history-filter {
        display: flex;
        gap: 8px;
      }

      .filter-btn {
        padding: 6px 12px;
        background: var(--secondary-bg);
        border: 1px solid var(--border-color);
        border-radius: 6px;
        color: var(--text-secondary);
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.85rem;
      }

      .filter-btn.active {
        background: var(--accent-color);
        color: white;
        border-color: var(--accent-color);
      }

      .history-list {
        max-height: 300px;
        overflow-y: auto;
      }

      .history-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 0;
        border-bottom: 1px solid var(--border-color);
      }

      .history-item:last-child {
        border-bottom: none;
      }

      .history-date {
        font-size: 0.9rem;
        color: var(--text-secondary);
      }

      .history-weight {
        font-weight: 600;
        color: var(--text-primary);
      }

      .history-change {
        font-size: 0.85rem;
        padding: 2px 8px;
        border-radius: 4px;
        font-weight: 500;
      }

      .history-change.positive {
        background: #fee2e2;
        color: var(--danger-color);
      }

      .history-change.negative {
        background: #dcfdf7;
        color: var(--success-color);
      }

      .history-actions {
        display: flex;
        gap: 8px;
      }

      .action-btn {
        padding: 4px 8px;
        background: transparent;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        color: var(--text-muted);
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.8rem;
      }

      .action-btn:hover {
        background: var(--accent-color);
        color: white;
        border-color: var(--accent-color);
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        z-index: 2000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(5px);
      }

      .modal-content {
        background: var(--card-bg);
        margin: 10% auto;
        border-radius: 16px;
        width: 90%;
        max-width: 500px;
        box-shadow: var(--shadow-xl);
        animation: modalSlideIn 0.3s ease;
      }

      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-50px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .modal-header {
        padding: 24px 24px 16px;
        border-bottom: 1px solid var(--border-color);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .modal-title {
        font-size: 1.3rem;
        font-weight: 600;
        color: var(--text-primary);
      }

      .close-btn {
        color: var(--text-muted);
        font-size: 1.5rem;
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.3s ease;
      }

      .close-btn:hover {
        color: var(--text-primary);
        background: var(--secondary-bg);
      }

      .modal-body {
        padding: 24px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        color: var(--text-secondary);
        font-weight: 500;
        font-size: 0.9rem;
      }

      .form-group input {
        width: 100%;
        padding: 12px 16px;
        background: var(--secondary-bg);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        color: var(--text-primary);
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .modal-actions {
        display: flex;
        gap: 12px;
        margin-top: 24px;
      }

      .modal-btn {
        flex: 1;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
        font-size: 0.95rem;
      }

      .btn-primary {
        background: var(--accent-color);
        color: white;
      }

      .btn-primary:hover {
        background: var(--accent-hover);
      }

      .btn-secondary {
        background: var(--secondary-bg);
        color: var(--text-secondary);
        border: 1px solid var(--border-color);
      }

      .btn-secondary:hover {
        background: var(--accent-light);
        color: var(--accent-color);
        border-color: var(--accent-color);
      }

      /* Bildirim */
      .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--success-color);
        color: white;
        padding: 16px 20px;
        border-radius: 12px;
        box-shadow: var(--shadow-lg);
        font-weight: 500;
        z-index: 10000;
        max-width: 300px;
        animation: slideIn 0.5s ease;
        cursor: pointer;
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      /* Bo≈ü durum */
      .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: var(--text-muted);
      }

      .empty-icon {
        font-size: 3rem;
        margin-bottom: 16px;
      }

      .empty-title {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 8px;
        color: var(--text-secondary);
      }

      .empty-text {
        margin-bottom: 24px;
        line-height: 1.6;
      }

      /* √ñzel scroll bar */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: var(--secondary-bg);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb {
        background: var(--border-color);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: var(--border-hover);
      }

      /* BMI Bilgi B√∂l√ºm√º */
      .bmi-info-section {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 16px;
        padding: 32px;
        margin-top: 32px;
        box-shadow: var(--shadow-sm);
      }

      .bmi-explanation {
        margin-bottom: 32px;
        padding: 20px;
        background: var(--accent-light);
        border-radius: 12px;
        border-left: 4px solid var(--accent-color);
      }

      .bmi-intro {
        font-size: 1rem;
        line-height: 1.6;
        color: var(--text-primary);
        margin: 0;
      }

      .bmi-intro strong {
        color: var(--accent-color);
        font-weight: 600;
      }

      .bmi-categories {
        display: grid;
        gap: 20px;
        margin-bottom: 32px;
      }

      .bmi-category {
        border-radius: 12px;
        padding: 20px;
        border: 1px solid var(--border-color);
        transition: all 0.3s ease;
      }

      .bmi-category:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
      }

      .bmi-category.underweight {
        background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        border-color: #f59e0b;
      }

      .bmi-category.normal {
        background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
        border-color: #10b981;
      }

      .bmi-category.overweight {
        background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%);
        border-color: #f97316;
      }

      .bmi-category.obese {
        background: linear-gradient(135deg, #fecaca 0%, #fca5a5 100%);
        border-color: #ef4444;
      }

      .category-header {
        display: flex;
        align-items: center;
        gap: 16px;
        margin-bottom: 16px;
      }

      .category-icon {
        font-size: 2rem;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50%;
        box-shadow: var(--shadow-sm);
      }

      .category-info h3 {
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0 0 4px 0;
      }

      .category-range {
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--text-secondary);
        background: rgba(255, 255, 255, 0.8);
        padding: 4px 12px;
        border-radius: 20px;
      }

      .category-description {
        line-height: 1.6;
      }

      .category-description p {
        margin: 0 0 8px 0;
        color: var(--text-primary);
      }

      .category-description strong {
        font-weight: 600;
      }

      .category-tips {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 12px;
      }

      .tip {
        font-size: 0.8rem;
        padding: 4px 8px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 12px;
        color: var(--text-secondary);
        font-weight: 500;
      }

      /* BMI Hesaplayƒ±cƒ± */
      .bmi-calculator {
        background: var(--secondary-bg);
        border-radius: 12px;
        padding: 24px;
        margin-bottom: 24px;
        border: 1px solid var(--border-color);
      }

      .bmi-calculator h3 {
        margin: 0 0 20px 0;
        color: var(--text-primary);
        font-size: 1.2rem;
        font-weight: 600;
      }

      .calculator-inputs {
        display: flex;
        gap: 16px;
        align-items: end;
        flex-wrap: wrap;
      }

      .calc-input-group {
        flex: 1;
        min-width: 120px;
      }

      .calc-input-group label {
        display: block;
        margin-bottom: 8px;
        color: var(--text-secondary);
        font-weight: 500;
        font-size: 0.9rem;
      }

      .calc-input-group input {
        width: 100%;
        padding: 12px 16px;
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        color: var(--text-primary);
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .calc-input-group input:focus {
        outline: none;
        border-color: var(--accent-color);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      }

      .calc-btn {
        padding: 12px 24px;
        background: var(--accent-color);
        color: white;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        white-space: nowrap;
      }

      .calc-btn:hover {
        background: var(--accent-hover);
        transform: translateY(-1px);
      }

      .calc-result {
        margin-top: 20px;
        padding: 16px;
        background: var(--card-bg);
        border-radius: 8px;
        border: 1px solid var(--border-color);
        text-align: center;
      }

      .result-bmi {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 12px;
        margin-bottom: 12px;
      }

      .result-label {
        font-size: 1rem;
        color: var(--text-secondary);
        font-weight: 500;
      }

      .result-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--accent-color);
      }

      .result-category {
        font-size: 1.1rem;
        font-weight: 600;
        padding: 8px 16px;
        border-radius: 20px;
        display: inline-block;
      }

      .result-category.underweight {
        background: #fef3c7;
        color: #92400e;
      }

      .result-category.normal {
        background: #d1fae5;
        color: #065f46;
      }

      .result-category.overweight {
        background: #fed7aa;
        color: #9a3412;
      }

      .result-category.obese {
        background: #fecaca;
        color: #991b1b;
      }

      /* BMI Sonu√ß Detaylarƒ± */
      .result-details {
        margin-top: 20px;
        padding: 20px;
        background: var(--secondary-bg);
        border-radius: 12px;
        border: 1px solid var(--border-color);
      }

      .weight-recommendation {
        margin-bottom: 20px;
      }

      .weight-recommendation h4 {
        margin: 0 0 12px 0;
        color: var(--text-primary);
        font-size: 1.1rem;
        font-weight: 600;
      }

      .target-ranges {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-bottom: 20px;
      }

      .target-range {
        background: var(--card-bg);
        padding: 16px;
        border-radius: 8px;
        border: 1px solid var(--border-color);
        text-align: center;
      }

      .target-range.ideal {
        border-color: var(--success-color);
        background: #f0fdf4;
      }

      .target-range h5 {
        margin: 0 0 8px 0;
        color: var(--text-secondary);
        font-size: 0.9rem;
        font-weight: 500;
      }

      .target-range .range-value {
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--text-primary);
      }

      .target-range.ideal .range-value {
        color: var(--success-color);
      }

      .weight-goals {
        display: grid;
        gap: 12px;
      }

      .weight-goal {
        background: var(--card-bg);
        padding: 16px;
        border-radius: 8px;
        border-left: 4px solid var(--accent-color);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .goal-info {
        flex: 1;
      }

      .goal-label {
        font-size: 0.9rem;
        color: var(--text-secondary);
        margin-bottom: 4px;
      }

      .goal-value {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--text-primary);
      }

      .goal-timeline {
        text-align: right;
        color: var(--text-muted);
        font-size: 0.85rem;
      }

      .health-tips {
        margin-top: 20px;
        padding: 16px;
        background: var(--accent-light);
        border-radius: 8px;
        border-left: 4px solid var(--accent-color);
      }

      .health-tips h5 {
        margin: 0 0 12px 0;
        color: var(--accent-color);
        font-size: 1rem;
        font-weight: 600;
      }

      .tips-list {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .tips-list li {
        margin-bottom: 8px;
        padding-left: 20px;
        position: relative;
        color: var(--text-primary);
        font-size: 0.9rem;
        line-height: 1.5;
      }

      .tips-list li:before {
        content: "üí°";
        position: absolute;
        left: 0;
        top: 0;
      }

      /* BMI Uyarƒ± */
      .bmi-disclaimer {
        background: #f8fafc;
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 20px;
        border-left: 4px solid var(--warning-color);
      }

      .bmi-disclaimer h4 {
        margin: 0 0 12px 0;
        color: var(--warning-color);
        font-size: 1.1rem;
        font-weight: 600;
      }

      .bmi-disclaimer p {
        margin: 0;
        color: var(--text-secondary);
        line-height: 1.6;
        font-size: 0.95rem;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .dashboard-grid,
        .analytics-section {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .current-stats {
          grid-template-columns: 1fr;
          gap: 12px;
        }

        .input-row {
          flex-direction: column;
        }

        .additional-stats {
          grid-template-columns: 1fr;
        }

        .history-controls {
          flex-direction: column;
          gap: 16px;
          align-items: stretch;
        }

        .history-filter {
          justify-content: center;
        }

        .container {
          padding: 0 16px;
        }
      }

      @media (max-width: 480px) {
        .container {
          padding: 0 12px;
        }

        .modal-content {
          margin: 5% auto;
          width: 95%;
        }

        .history-item {
          flex-direction: column;
          align-items: flex-start;
          gap: 8px;
        }

        .history-actions {
          align-self: flex-end;
        }
      }

      /* Responsive - BMI B√∂l√ºm√º */
      @media (max-width: 768px) {
        .bmi-info-section {
          padding: 24px 20px;
          margin-top: 24px;
        }

        .category-header {
          flex-direction: column;
          text-align: center;
          gap: 12px;
        }

        .category-icon {
          width: 50px;
          height: 50px;
          font-size: 1.5rem;
        }

        .calculator-inputs {
          flex-direction: column;
          align-items: stretch;
        }

        .calc-btn {
          margin-top: 12px;
        }

        .category-tips {
          justify-content: center;
        }

        /* Responsive - BMI Sonu√ß Detaylarƒ± */
        .target-ranges {
          grid-template-columns: 1fr;
          gap: 12px;
        }

        .weight-goal {
          flex-direction: column;
          align-items: flex-start;
          gap: 8px;
        }

        .goal-timeline {
          text-align: left;
        }
      }

      @media (max-width: 480px) {
        .bmi-categories {
          gap: 16px;
        }

        .bmi-category {
          padding: 16px;
        }

        .bmi-calculator {
          padding: 20px;
        }

        .bmi-disclaimer {
          padding: 16px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container">
        <nav class="nav">
          <div class="logo" onclick="window.location.href='dashboard.html'">
            GRINDMIND
          </div>
          <a href="dashboard.html" class="back-btn">‚Üê Dashboard'a D√∂n</a>
        </nav>
      </div>
    </header>

    <!-- Ana ƒ∞√ßerik -->
    <main class="main-content">
      <div class="container">
        <!-- Sayfa Ba≈ülƒ±ƒüƒ± -->
        <div class="page-header">
          <h1 class="page-title">‚öñÔ∏è Kilo Takibi</h1>
          <p class="page-subtitle">
            Kilo deƒüi≈üimini takip et, hedeflerini belirle ve saƒülƒ±klƒ± ya≈üama
            ula≈ü
          </p>
        </div>

        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
          <!-- Kilo ve Boy Ekleme -->
          <div class="quick-add-section">
            <h2 class="section-title">üìä Bilgilerini Ekle</h2>

            <!-- Kilo Giri≈üi -->
            <div class="input-row">
              <div class="input-group">
                <label class="input-label">Kilo</label>
                <input
                  type="number"
                  class="weight-input"
                  id="weightInput"
                  placeholder="75.5"
                  step="0.1"
                  min="20"
                  max="300"
                />
              </div>
              <div class="input-group" style="flex: 0 0 80px">
                <label class="input-label">Birim</label>
                <select class="unit-selector" id="unitSelector">
                  <option value="kg">kg</option>
                  <option value="lbs">lbs</option>
                </select>
              </div>
            </div>

            <!-- Boy Giri≈üi -->
            <div class="input-row">
              <div class="input-group">
                <label class="input-label">Boy (cm)</label>
                <input
                  type="number"
                  class="weight-input"
                  id="heightInput"
                  placeholder="175"
                  min="100"
                  max="250"
                />
              </div>
              <div class="input-group" style="flex: 0 0 80px">
                <label class="input-label">&nbsp;</label>
                <button
                  class="add-weight-btn"
                  onclick="saveHeight()"
                  style="height: 48px"
                >
                  üíæ
                </button>
              </div>
            </div>

            <button class="add-weight-btn" onclick="addWeight()">
              Kilo Ekle
            </button>
          </div>

          <!-- Mevcut ƒ∞statistikler -->
          <div class="quick-add-section">
            <h2 class="section-title">üìà Mevcut Durum</h2>
            <div class="current-stats">
              <div class="stat-card">
                <span class="stat-value current" id="currentWeight">-</span>
                <span class="stat-label">Mevcut</span>
              </div>
              <div class="stat-card">
                <span class="stat-value target" id="targetWeight">Belirle</span>
                <span class="stat-label">Hedef</span>
              </div>
              <div class="stat-card">
                <span class="stat-value change" id="weightChange">-</span>
                <span class="stat-label">Deƒüi≈üim</span>
              </div>
            </div>

            <div class="additional-stats">
              <div class="stat-card-wide">
                <span class="stat-value" id="heightDisplay">-</span>
                <span class="stat-label">Boy (cm)</span>
              </div>
              <div class="stat-card-wide">
                <span class="stat-value" id="bmiValue">-</span>
                <span class="stat-label">BMI</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Analitik ve ƒ∞lerleme -->
        <div class="analytics-section">
          <!-- Grafik -->
          <div class="chart-container">
            <h2 class="section-title">üìä Kilo Grafiƒüi</h2>
            <div class="chart-wrapper">
              <canvas id="weightChart"></canvas>
            </div>
          </div>

          <!-- ƒ∞lerleme -->
          <div class="progress-section">
            <h2 class="section-title">üéØ ƒ∞lerleme</h2>
            <div class="progress-item">
              <div class="progress-label">
                <span>Hedefe Ula≈üma</span>
                <span id="goalProgress">0%</span>
              </div>
              <div class="progress-bar">
                <div
                  class="progress-fill"
                  id="goalProgressBar"
                  style="width: 0%"
                ></div>
              </div>
            </div>

            <div class="progress-item">
              <div class="progress-label">
                <span>Bu Ay Deƒüi≈üim</span>
                <span id="monthlyChange">0 kg</span>
              </div>
              <div class="progress-bar">
                <div
                  class="progress-fill"
                  id="monthlyProgressBar"
                  style="width: 0%"
                ></div>
              </div>
            </div>

            <div class="progress-item">
              <div class="progress-label">
                <span>BMI Durumu</span>
                <span id="bmiStatus">-</span>
              </div>
              <div class="progress-bar">
                <div
                  class="progress-fill"
                  id="bmiProgressBar"
                  style="width: 0%"
                ></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Ge√ßmi≈ü Kayƒ±tlar -->
        <div class="history-section">
          <div class="history-controls">
            <h2 class="section-title">üìÖ Ge√ßmi≈ü Kayƒ±tlar</h2>
            <div class="history-filter">
              <button class="filter-btn active" onclick="filterHistory('all')">
                T√ºm√º
              </button>
              <button class="filter-btn" onclick="filterHistory('week')">
                Bu Hafta
              </button>
              <button class="filter-btn" onclick="filterHistory('month')">
                Bu Ay
              </button>
            </div>
          </div>

          <div class="history-list" id="historyList">
            <!-- Ge√ßmi≈ü kayƒ±tlar buraya gelecek -->
          </div>
        </div>

        <!-- BMI Bilgi B√∂l√ºm√º -->
        <div class="bmi-info-section">
          <h2 class="section-title">üè• BMI Deƒüerin Ne Anlama Geliyor?</h2>

          <div class="bmi-explanation">
            <p class="bmi-intro">
              BMI (V√ºcut Kitle ƒ∞ndeksi), v√ºcut aƒüƒ±rlƒ±ƒüƒ±nƒ±n boy uzunluƒüuna
              oranƒ±dƒ±r ve genel saƒülƒ±k durumunu deƒüerlendirmek i√ßin kullanƒ±lƒ±r.
              <strong>BMI = Kilo (kg) √∑ Boy¬≤ (m)</strong>
            </p>
          </div>

          <div class="bmi-categories">
            <div class="bmi-category underweight">
              <div class="category-header">
                <span class="category-icon">‚öñÔ∏è</span>
                <div class="category-info">
                  <h3>Zayƒ±f</h3>
                  <span class="category-range">BMI < 18.5</span>
                </div>
              </div>
              <div class="category-description">
                <p><strong>Durum:</strong> Normal kilodan d√º≈ü√ºk</p>
                <p>
                  <strong>√ñneriler:</strong> Saƒülƒ±klƒ± kilo almaya odaklanƒ±n,
                  dengeli beslenin ve kas k√ºtlesi artƒ±rƒ±cƒ± egzersizler yapƒ±n.
                </p>
                <div class="category-tips">
                  <span class="tip">üí° Protein aƒüƒ±rlƒ±klƒ± beslenme</span>
                  <span class="tip">üí™ Kuvvet antrenmanlarƒ±</span>
                  <span class="tip">üë®‚Äç‚öïÔ∏è Doktor kontrol√º</span>
                </div>
              </div>
            </div>

            <div class="bmi-category normal">
              <div class="category-header">
                <span class="category-icon">‚úÖ</span>
                <div class="category-info">
                  <h3>Normal</h3>
                  <span class="category-range">BMI 18.5 - 24.9</span>
                </div>
              </div>
              <div class="category-description">
                <p><strong>Durum:</strong> ƒ∞deal kilo aralƒ±ƒüƒ±nda</p>
                <p>
                  <strong>√ñneriler:</strong> Mevcut kiloyu koruyun, d√ºzenli
                  egzersiz yapƒ±n ve dengeli beslenmeye devam edin.
                </p>
                <div class="category-tips">
                  <span class="tip">ü•ó Dengeli beslenme</span>
                  <span class="tip">üèÉ‚Äç‚ôÇÔ∏è D√ºzenli egzersiz</span>
                  <span class="tip">üò¥ Kaliteli uyku</span>
                </div>
              </div>
            </div>

            <div class="bmi-category overweight">
              <div class="category-header">
                <span class="category-icon">‚ö†Ô∏è</span>
                <div class="category-info">
                  <h3>Fazla Kilolu</h3>
                  <span class="category-range">BMI 25.0 - 29.9</span>
                </div>
              </div>
              <div class="category-description">
                <p><strong>Durum:</strong> Normal kilonun √ºzerinde</p>
                <p>
                  <strong>√ñneriler:</strong> Kademeli kilo verme, kalori
                  kontrol√º ve d√ºzenli kardiyovask√ºler egzersizler.
                </p>
                <div class="category-tips">
                  <span class="tip">üî• Kalori a√ßƒ±ƒüƒ±</span>
                  <span class="tip">üö¥‚Äç‚ôÇÔ∏è Kardiyovask√ºler egzersiz</span>
                  <span class="tip">üìä Porsiyon kontrol√º</span>
                </div>
              </div>
            </div>

            <div class="bmi-category obese">
              <div class="category-header">
                <span class="category-icon">üö®</span>
                <div class="category-info">
                  <h3>Obez</h3>
                  <span class="category-range">BMI ‚â• 30.0</span>
                </div>
              </div>
              <div class="category-description">
                <p><strong>Durum:</strong> Saƒülƒ±k riski ta≈üƒ±yan kilo</p>
                <p>
                  <strong>√ñneriler:</strong> Profesyonel destek alƒ±n, sistematik
                  kilo verme planƒ± ve ya≈üam tarzƒ± deƒüi≈üiklikleri.
                </p>
                <div class="category-tips">
                  <span class="tip">üë®‚Äç‚öïÔ∏è Doktor desteƒüi</span>
                  <span class="tip">üìã Beslenme uzmanƒ±</span>
                  <span class="tip">üéØ A≈üamalƒ± hedefler</span>
                </div>
              </div>
            </div>
          </div>

          <div class="bmi-calculator">
            <h3>üî¢ BMI Hesaplayƒ±cƒ±</h3>
            <div class="calculator-inputs">
              <div class="calc-input-group">
                <label>Kilo (kg)</label>
                <input
                  type="number"
                  id="calcWeight"
                  placeholder="75"
                  step="0.1"
                  min="20"
                  max="300"
                />
              </div>
              <div class="calc-input-group">
                <label>Boy (cm)</label>
                <input
                  type="number"
                  id="calcHeight"
                  placeholder="175"
                  min="100"
                  max="250"
                />
              </div>
              <button class="calc-btn" onclick="calculateBMI()">Hesapla</button>
            </div>
            <div class="calc-result" id="calcResult" style="display: none">
              <div class="result-bmi">
                <span class="result-label">BMI Deƒüerin:</span>
                <span class="result-value" id="resultBMI">-</span>
              </div>
              <div class="result-category" id="resultCategory">-</div>
              <div class="result-details" id="resultDetails"></div>
            </div>
          </div>

          <div class="bmi-disclaimer">
            <h4>‚ö†Ô∏è √ñnemli Uyarƒ±</h4>
            <p>
              BMI genel bir g√∂stergedir ve kas k√ºtlesi, kemik yoƒüunluƒüu gibi
              fakt√∂rleri hesaba katmaz. Atletler ve kas k√ºtlesi y√ºksek ki≈üilerde
              yanƒ±ltƒ±cƒ± olabilir. Saƒülƒ±k durumunuz hakkƒ±nda kesin bilgi i√ßin
              mutlaka saƒülƒ±k profesyoneline danƒ±≈üƒ±n.
            </p>
          </div>
        </div>
      </div>
    </main>

    <!-- Hedef Belirleme Modal -->
    <div id="targetModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">üéØ Hedef Belirle</h3>
          <span class="close-btn" onclick="closeModal('targetModal')"
            >&times;</span
          >
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Hedef Kilo (kg)</label>
            <input
              type="number"
              id="targetInput"
              placeholder="Hedef kilonuzu girin"
              step="0.1"
              min="20"
              max="300"
            />
          </div>
          <div class="modal-actions">
            <button
              class="modal-btn btn-secondary"
              onclick="closeModal('targetModal')"
            >
              ƒ∞ptal
            </button>
            <button class="modal-btn btn-primary" onclick="setTarget()">
              Hedef Belirle
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Global deƒüi≈ükenler
      let weightData = JSON.parse(localStorage.getItem("weightData") || "[]");
      let targetWeight = parseFloat(
        localStorage.getItem("targetWeight") || "0"
      );
      let userHeight = parseFloat(localStorage.getItem("userHeight") || "0");
      let chart = null;
      let currentFilter = "all";

      // Sayfa y√ºklendiƒüinde
      document.addEventListener("DOMContentLoaded", function () {
        loadData();
        initializeChart();
        updateStats();
        updateHistory();

        // Enter tu≈üu ile kilo ekleme
        document
          .getElementById("weightInput")
          .addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
              addWeight();
            }
          });

        // Enter tu≈üu ile boy kaydetme
        document
          .getElementById("heightInput")
          .addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
              saveHeight();
            }
          });

        // BMI hesaplayƒ±cƒ± i√ßin enter tu≈üu
        const calcInputs = document.querySelectorAll(
          "#calcWeight, #calcHeight"
        );
        calcInputs.forEach((input) => {
          input.addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
              calculateBMI();
            }
          });
        });

        // Mevcut kilo varsa BMI hesaplayƒ±cƒ±sƒ±na otomatik doldur
        if (weightData.length > 0) {
          const currentWeight = weightData[weightData.length - 1].weight;
          document.getElementById("calcWeight").value = currentWeight;
        }

        // Mevcut boy varsa BMI hesaplayƒ±cƒ±sƒ±na otomatik doldur
        if (userHeight > 0) {
          document.getElementById("calcHeight").value = userHeight;
          document.getElementById("heightInput").value = userHeight;
        }
      });

      // Kilo ekleme
      function addWeight() {
        const weightInput = document.getElementById("weightInput");
        const unitSelector = document.getElementById("unitSelector");
        const weight = parseFloat(weightInput.value);

        if (!weight || weight < 20 || weight > 300) {
          showNotification(
            "L√ºtfen ge√ßerli bir kilo girin (20-300 kg)",
            "error"
          );
          return;
        }

        // Birim d√∂n√º≈ü√ºm√º (lbs to kg)
        const weightInKg =
          unitSelector.value === "lbs" ? weight * 0.453592 : weight;

        const entry = {
          id: Date.now(),
          weight: Math.round(weightInKg * 10) / 10, // 1 ondalƒ±k basamak
          originalWeight: weight,
          unit: unitSelector.value,
          date: new Date().toISOString(),
          timestamp: Date.now(),
        };

        weightData.push(entry);
        saveData();

        weightInput.value = "";
        updateStats();
        updateHistory();
        updateChart();

        showNotification("Kilo ba≈üarƒ±yla eklendi!");
      }

      // Boy kaydetme fonksiyonu
      function saveHeight() {
        const heightInput = document.getElementById("heightInput");
        const height = parseFloat(heightInput.value);

        if (!height || height < 100 || height > 250) {
          showNotification(
            "L√ºtfen ge√ßerli bir boy girin (100-250 cm)",
            "error"
          );
          return;
        }

        userHeight = height;
        localStorage.setItem("userHeight", userHeight.toString());

        updateStats();
        showNotification("Boy bilginiz kaydedildi!");

        // BMI hesaplayƒ±cƒ±sƒ±nƒ± da g√ºncelle
        document.getElementById("calcHeight").value = userHeight;
      }

      // Hedef belirleme modalƒ±nƒ± a√ß
      function showTargetModal() {
        document.getElementById("targetModal").style.display = "flex";
        if (targetWeight > 0) {
          document.getElementById("targetInput").value = targetWeight;
        }
      }

      // Hedef belirleme
      function setTarget() {
        const targetInput = document.getElementById("targetInput");

        const newTarget = parseFloat(targetInput.value);

        if (!newTarget || newTarget < 20 || newTarget > 300) {
          showNotification(
            "L√ºtfen ge√ßerli bir hedef kilo girin (20-300 kg)",
            "error"
          );
          return;
        }

        targetWeight = newTarget;
        localStorage.setItem("targetWeight", targetWeight.toString());

        closeModal("targetModal");
        updateStats();
        showNotification("Hedef ba≈üarƒ±yla belirlendi!");
      }

      // Modal kapatma
      function closeModal(modalId) {
        document.getElementById(modalId).style.display = "none";
      }

      // ƒ∞statistikleri g√ºncelle
      function updateStats() {
        const currentWeightEl = document.getElementById("currentWeight");
        const targetWeightEl = document.getElementById("targetWeight");
        const weightChangeEl = document.getElementById("weightChange");
        const heightDisplayEl = document.getElementById("heightDisplay");
        const goalProgressEl = document.getElementById("goalProgress");
        const goalProgressBarEl = document.getElementById("goalProgressBar");
        const monthlyChangeEl = document.getElementById("monthlyChange");
        const monthlyProgressBarEl =
          document.getElementById("monthlyProgressBar");
        const bmiValueEl = document.getElementById("bmiValue");
        const bmiProgressBarEl = document.getElementById("bmiProgressBar");
        const bmiStatusEl = document.getElementById("bmiStatus");

        if (weightData.length === 0) {
          currentWeightEl.textContent = "-";
          weightChangeEl.textContent = "-";
          goalProgressEl.textContent = "0%";
          goalProgressBarEl.style.width = "0%";
          monthlyChangeEl.textContent = "0 kg";
          monthlyProgressBarEl.style.width = "0%";
          bmiValueEl.textContent = "-";
          bmiProgressBarEl.style.width = "0%";
          bmiStatusEl.textContent = "-";
        } else {
          // Mevcut kilo
          const currentWeight = weightData[weightData.length - 1].weight;
          currentWeightEl.textContent = `${currentWeight} kg`;

          // Kilo deƒüi≈üimi (son 2 kayƒ±t)
          if (weightData.length >= 2) {
            const previousWeight = weightData[weightData.length - 2].weight;
            const change = currentWeight - previousWeight;
            const changeText =
              change > 0
                ? `+${change.toFixed(1)} kg`
                : `${change.toFixed(1)} kg`;
            weightChangeEl.textContent = changeText;
            weightChangeEl.className = `stat-value change ${
              change < 0 ? "" : "negative"
            }`;
          } else {
            weightChangeEl.textContent = "-";
            weightChangeEl.className = "stat-value change";
          }

          // Hedefe ilerleme
          if (targetWeight > 0 && weightData.length >= 1) {
            const startWeight = weightData[0].weight;
            const totalChange = Math.abs(targetWeight - startWeight);
            const currentChange = Math.abs(currentWeight - startWeight);
            const progress = Math.min((currentChange / totalChange) * 100, 100);

            goalProgressEl.textContent = `${Math.round(progress)}%`;
            goalProgressBarEl.style.width = `${progress}%`;
          }

          // Aylƒ±k deƒüi≈üim
          const oneMonthAgo = new Date();
          oneMonthAgo.setMonth(oneMonthAgo.getMonth() - 1);

          const monthlyData = weightData.filter(
            (entry) => new Date(entry.date) >= oneMonthAgo
          );
          if (monthlyData.length >= 2) {
            const monthlyChange = currentWeight - monthlyData[0].weight;
            monthlyChangeEl.textContent = `${
              monthlyChange >= 0 ? "+" : ""
            }${monthlyChange.toFixed(1)} kg`;

            const maxChange = 10; // Maksimum aylƒ±k deƒüi≈üim varsayƒ±mƒ±
            const changePercent = Math.min(
              Math.abs(monthlyChange / maxChange) * 100,
              100
            );
            monthlyProgressBarEl.style.width = `${changePercent}%`;
          }

          // BMI hesaplama
          if (userHeight > 0) {
            const heightInM = userHeight / 100;
            const bmi = currentWeight / (heightInM * heightInM);
            updateBMIProgress(bmi);
          }
        }

        // Hedef kilo
        if (targetWeight > 0) {
          targetWeightEl.textContent = `${targetWeight} kg`;
          targetWeightEl.onclick = showTargetModal;
          targetWeightEl.style.cursor = "pointer";
          targetWeightEl.title = "Hedefi deƒüi≈ütirmek i√ßin tƒ±klayƒ±n";
        } else {
          targetWeightEl.textContent = "Belirle";
          targetWeightEl.onclick = showTargetModal;
          targetWeightEl.style.cursor = "pointer";
          targetWeightEl.title = "Hedef belirlemek i√ßin tƒ±klayƒ±n";
        }

        // Boy g√∂sterimi
        if (userHeight > 0) {
          heightDisplayEl.textContent = `${userHeight} cm`;
        } else {
          heightDisplayEl.textContent = "Belirtilmedi";
        }

        // BMI g√∂sterimi
        if (userHeight > 0 && weightData.length > 0) {
          const currentWeight = weightData[weightData.length - 1].weight;
          const heightInM = userHeight / 100;
          const bmi = currentWeight / (heightInM * heightInM);
          bmiValueEl.textContent = bmi.toFixed(1);

          // BMI durumu
          let bmiCategory = "";
          if (bmi < 18.5) bmiCategory = "Zayƒ±f";
          else if (bmi < 25) bmiCategory = "Normal";
          else if (bmi < 30) bmiCategory = "Fazla Kilolu";
          else bmiCategory = "Obez";

          bmiStatusEl.textContent = bmiCategory;
        } else {
          bmiValueEl.textContent = "Hesapla";
          bmiValueEl.onclick = () => {
            document.getElementById("calcHeight").focus();
            document
              .getElementById("calcHeight")
              .scrollIntoView({ behavior: "smooth" });
          };
          bmiValueEl.style.cursor = "pointer";
          bmiValueEl.title =
            "BMI hesaplamak i√ßin a≈üaƒüƒ±daki hesaplayƒ±cƒ±yƒ± kullanƒ±n";
          bmiProgressBarEl.style.width = "0%";
          bmiStatusEl.textContent = "-";
        }
      }

      // Ge√ßmi≈üi g√ºncelle
      function updateHistory() {
        const historyList = document.getElementById("historyList");

        if (weightData.length === 0) {
          historyList.innerHTML = `
                  <div class="empty-state">
                      <div class="empty-icon">üìù</div>
                      <h3 class="empty-title">Hen√ºz kilo kaydƒ±n yok</h3>
                      <p class="empty-text">ƒ∞lk kilo √∂l√ß√ºm√ºn√º ekleyerek ba≈üla!</p>
                  </div>
              `;
          return;
        }

        // Filtreleme
        let filteredData = [...weightData];
        const now = new Date();

        if (currentFilter === "week") {
          const oneWeekAgo = new Date();
          oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
          filteredData = weightData.filter(
            (entry) => new Date(entry.date) >= oneWeekAgo
          );
        } else if (currentFilter === "month") {
          const oneMonthAgo = new Date();
          oneMonthAgo.setMonth(oneMonthAgo.getMonth() - 1);
          filteredData = weightData.filter(
            (entry) => new Date(entry.date) >= oneMonthAgo
          );
        }

        // Tersten sƒ±rala (en yeni √∂nce)
        filteredData.reverse();

        historyList.innerHTML = filteredData
          .map((entry, index) => {
            const date = new Date(entry.date);
            const dateStr = formatDate(date);

            // √ñnceki kayƒ±tla kar≈üƒ±la≈ütƒ±rma
            let changeHtml = "";
            if (index < filteredData.length - 1) {
              const prevEntry = filteredData[index + 1];
              const change = entry.weight - prevEntry.weight;
              if (Math.abs(change) >= 0.1) {
                const changeClass = change > 0 ? "positive" : "negative";
                const changeSymbol = change > 0 ? "+" : "";
                changeHtml = `<span class="history-change ${changeClass}">${changeSymbol}${change.toFixed(
                  1
                )} kg</span>`;
              }
            }

            return `
                  <div class="history-item">
                      <div>
                          <div class="history-weight">${entry.weight} kg</div>
                          <div class="history-date">${dateStr}</div>
                      </div>
                      <div style="display: flex; align-items: center; gap: 12px;">
                          ${changeHtml}
                          <div class="history-actions">
                              <button class="action-btn" onclick="editWeight(${entry.id})" title="D√ºzenle">‚úèÔ∏è</button>
                              <button class="action-btn" onclick="deleteWeight(${entry.id})" title="Sil">üóëÔ∏è</button>
                          </div>
                      </div>
                  </div>
              `;
          })
          .join("");
      }

      // Ge√ßmi≈ü filtreleme
      function filterHistory(filter) {
        currentFilter = filter;

        // Filtre butonlarƒ±nƒ± g√ºncelle
        document.querySelectorAll(".filter-btn").forEach((btn) => {
          btn.classList.remove("active");
        });
        event.target.classList.add("active");

        updateHistory();
      }

      // Grafik ba≈ülatma
      function initializeChart() {
        const ctx = document.getElementById("weightChart").getContext("2d");

        chart = new Chart(ctx, {
          type: "line",
          data: {
            labels: [],
            datasets: [
              {
                label: "Kilo (kg)",
                data: [],
                borderColor: "#2563eb",
                backgroundColor: "rgba(37, 99, 235, 0.1)",
                borderWidth: 3,
                fill: true,
                tension: 0.4,
                pointBackgroundColor: "#2563eb",
                pointBorderColor: "#ffffff",
                pointBorderWidth: 2,
                pointRadius: 6,
                pointHoverRadius: 8,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false,
              },
            },
            scales: {
              x: {
                grid: {
                  color: "#e2e8f0",
                },
                ticks: {
                  color: "#64748b",
                },
              },
              y: {
                grid: {
                  color: "#e2e8f0",
                },
                ticks: {
                  color: "#64748b",
                  callback: function (value) {
                    return value + " kg";
                  },
                },
              },
            },
            elements: {
              point: {
                hoverBackgroundColor: "#2563eb",
              },
            },
          },
        });

        updateChart();
      }

      // Grafik g√ºncelleme
      function updateChart() {
        if (!chart) return;

        const chartData = weightData.slice(-30); // Son 30 kayƒ±t

        chart.data.labels = chartData.map((entry) => {
          const date = new Date(entry.date);
          return date.toLocaleDateString("tr-TR", {
            month: "short",
            day: "numeric",
          });
        });

        chart.data.datasets[0].data = chartData.map((entry) => entry.weight);

        // Hedef √ßizgisi ekle
        if (targetWeight > 0) {
          if (chart.data.datasets.length === 1) {
            chart.data.datasets.push({
              label: "Hedef",
              data: new Array(chartData.length).fill(targetWeight),
              borderColor: "#06b6d4",
              backgroundColor: "transparent",
              borderWidth: 2,
              borderDash: [5, 5],
              fill: false,
              pointRadius: 0,
              pointHoverRadius: 0,
            });
          } else {
            chart.data.datasets[1].data = new Array(chartData.length).fill(
              targetWeight
            );
          }
        }

        chart.update();
      }

      // Kilo d√ºzenleme
      function editWeight(id) {
        const entry = weightData.find((w) => w.id === id);
        if (!entry) return;

        const newWeight = prompt("Yeni kilo deƒüeri:", entry.weight);
        if (newWeight && !isNaN(newWeight) && newWeight > 0) {
          entry.weight = parseFloat(newWeight);
          saveData();
          updateStats();
          updateHistory();
          updateChart();
          showNotification("Kilo g√ºncellendi!");
        }
      }

      // Kilo silme
      function deleteWeight(id) {
        if (confirm("Bu kaydƒ± silmek istediƒüinizden emin misiniz?")) {
          weightData = weightData.filter((w) => w.id !== id);
          saveData();
          updateStats();
          updateHistory();
          updateChart();
          showNotification("Kayƒ±t silindi!");
        }
      }

      // Veri kaydetme
      function saveData() {
        localStorage.setItem("weightData", JSON.stringify(weightData));
      }

      // Veri y√ºkleme
      function loadData() {
        // Veriler zaten global deƒüi≈ükenlerde y√ºkl√º
      }

      // Tarih formatlama
      function formatDate(date) {
        const now = new Date();
        const diffTime = Math.abs(now - date);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

        if (diffDays === 1) {
          return "Bug√ºn";
        } else if (diffDays === 2) {
          return "D√ºn";
        } else if (diffDays <= 7) {
          return `${diffDays - 1} g√ºn √∂nce`;
        } else {
          return date.toLocaleDateString("tr-TR", {
            day: "numeric",
            month: "short",
            year:
              date.getFullYear() !== now.getFullYear() ? "numeric" : undefined,
          });
        }
      }

      // Bildirim g√∂sterme
      function showNotification(message, type = "success") {
        const notification = document.createElement("div");
        notification.className = "notification";
        notification.textContent = message;

        if (type === "error") {
          notification.style.background = "#ef4444";
        }

        document.body.appendChild(notification);

        setTimeout(() => {
          notification.style.transform = "translateX(100%)";
          notification.style.opacity = "0";
          setTimeout(() => {
            document.body.removeChild(notification);
          }, 300);
        }, 3000);

        notification.onclick = () => {
          notification.style.transform = "translateX(100%)";
          notification.style.opacity = "0";
          setTimeout(() => {
            document.body.removeChild(notification);
          }, 300);
        };
      }

      // BMI hesaplayƒ±cƒ± fonksiyonu
      function calculateBMI() {
        const weightInput = document.getElementById("calcWeight");
        const heightInput = document.getElementById("calcHeight");
        const resultDiv = document.getElementById("calcResult");
        const resultBMI = document.getElementById("resultBMI");
        const resultCategory = document.getElementById("resultCategory");

        const weight = parseFloat(weightInput.value);
        const height = parseFloat(heightInput.value);

        if (
          !weight ||
          !height ||
          weight < 20 ||
          weight > 300 ||
          height < 100 ||
          height > 250
        ) {
          showNotification(
            "L√ºtfen ge√ßerli kilo (20-300 kg) ve boy (100-250 cm) deƒüerleri girin",
            "error"
          );
          return;
        }

        // Boy bilgisini kaydet
        userHeight = height;
        localStorage.setItem("userHeight", userHeight.toString());

        const heightInM = height / 100;
        const bmi = weight / (heightInM * heightInM);

        resultBMI.textContent = bmi.toFixed(1);

        let category = "";
        let categoryClass = "";

        if (bmi < 18.5) {
          category = "Zayƒ±f";
          categoryClass = "underweight";
        } else if (bmi < 25) {
          category = "Normal";
          categoryClass = "normal";
        } else if (bmi < 30) {
          category = "Fazla Kilolu";
          categoryClass = "overweight";
        } else {
          category = "Obez";
          categoryClass = "obese";
        }

        resultCategory.textContent = category;
        resultCategory.className = `result-category ${categoryClass}`;

        // Detaylƒ± analiz ve √∂neriler
        generateWeightRecommendations(bmi, weight, height, category);

        resultDiv.style.display = "block";

        // ƒ∞statistikleri g√ºncelle (BMI bilgisi kaydedildi)
        updateStats();

        // √ústteki BMI progress bar'ƒ±nƒ± da g√ºncelle
        updateBMIProgress(bmi);

        // Smooth scroll to result
        resultDiv.scrollIntoView({ behavior: "smooth", block: "nearest" });

        showNotification("BMI hesaplandƒ± ve boy bilginiz kaydedildi!");
      }

      // BMI sonu√ßlarƒ± i√ßin detaylƒ± √∂neriler olu≈ütur
      function generateWeightRecommendations(
        bmi,
        currentWeight,
        height,
        category
      ) {
        const heightInM = height / 100;
        const resultDetails = document.getElementById("resultDetails");

        // Saƒülƒ±klƒ± BMI aralƒ±ƒüƒ± (18.5 - 24.9)
        const minHealthyWeight = 18.5 * heightInM * heightInM;
        const maxHealthyWeight = 24.9 * heightInM * heightInM;
        const idealWeight = 22 * heightInM * heightInM; // BMI 22 ideal kabul edilir

        let recommendationsHTML = "";

        // Hedef aƒüƒ±rlƒ±k aralƒ±klarƒ±
        recommendationsHTML += `
          <div class="weight-recommendation">
            <h4>üéØ Saƒülƒ±klƒ± Kilo Aralƒ±ƒüƒ±</h4>
            <div class="target-ranges">
              <div class="target-range">
                <h5>Minimum Saƒülƒ±klƒ±</h5>
                <div class="range-value">${minHealthyWeight.toFixed(1)} kg</div>
              </div>
              <div class="target-range ideal">
                <h5>ƒ∞deal Kilo</h5>
                <div class="range-value">${idealWeight.toFixed(1)} kg</div>
              </div>
              <div class="target-range">
                <h5>Maksimum Saƒülƒ±klƒ±</h5>
                <div class="range-value">${maxHealthyWeight.toFixed(1)} kg</div>
              </div>
            </div>
          </div>
        `;

        // Kilo verme/alma hesaplamalarƒ±
        const weightGoals = [];

        if (bmi < 18.5) {
          // Zayƒ±f - kilo almasƒ± gerekiyor
          const toMinHealthy = minHealthyWeight - currentWeight;
          const toIdeal = idealWeight - currentWeight;

          weightGoals.push({
            label: "Saƒülƒ±klƒ± BMI'ye ula≈ümak i√ßin",
            value: `+${toMinHealthy.toFixed(1)} kg almalƒ±sƒ±n`,
            timeline: `${Math.ceil(toMinHealthy / 0.5)} hafta (haftada 0.5kg)`,
          });

          if (toIdeal > 0) {
            weightGoals.push({
              label: "ƒ∞deal kiloya ula≈ümak i√ßin",
              value: `+${toIdeal.toFixed(1)} kg almalƒ±sƒ±n`,
              timeline: `${Math.ceil(toIdeal / 0.5)} hafta (haftada 0.5kg)`,
            });
          }
        } else if (bmi >= 25) {
          // Fazla kilolu/obez - kilo vermesi gerekiyor
          const toMaxHealthy = currentWeight - maxHealthyWeight;
          const toIdeal = currentWeight - idealWeight;

          if (toMaxHealthy > 0) {
            weightGoals.push({
              label: "Saƒülƒ±klƒ± BMI'ye ula≈ümak i√ßin",
              value: `${toMaxHealthy.toFixed(1)} kg vermelisin`,
              timeline: `${Math.ceil(
                toMaxHealthy / 0.5
              )} hafta (haftada 0.5kg)`,
            });
          }

          if (toIdeal > 0) {
            weightGoals.push({
              label: "ƒ∞deal kiloya ula≈ümak i√ßin",
              value: `${toIdeal.toFixed(1)} kg vermelisin`,
              timeline: `${Math.ceil(toIdeal / 0.5)} hafta (haftada 0.5kg)`,
            });
          }
        } else {
          // Normal BMI - tebrikler!
          const diffFromIdeal = Math.abs(currentWeight - idealWeight);
          if (diffFromIdeal > 1) {
            const direction = currentWeight > idealWeight ? "vermek" : "almak";
            weightGoals.push({
              label: "ƒ∞deal kiloya yakla≈ümak i√ßin",
              value: `${diffFromIdeal.toFixed(
                1
              )} kg ${direction} isteyebilirsin`,
              timeline: `${Math.ceil(
                diffFromIdeal / 0.5
              )} hafta (haftada 0.5kg)`,
            });
          } else {
            weightGoals.push({
              label: "Harika! ƒ∞deal kilo aralƒ±ƒüƒ±ndasƒ±n",
              value: "Mevcut kilonu korumaya odaklan",
              timeline: "D√ºzenli egzersiz ve dengeli beslenme",
            });
          }
        }

        // Hedef listesi
        if (weightGoals.length > 0) {
          recommendationsHTML += `
            <div class="weight-recommendation">
              <h4>üìä Kilo Hedeflerin</h4>
              <div class="weight-goals">
                ${weightGoals
                  .map(
                    (goal) => `
                  <div class="weight-goal">
                    <div class="goal-info">
                      <div class="goal-label">${goal.label}</div>
                      <div class="goal-value">${goal.value}</div>
                    </div>
                    <div class="goal-timeline">${goal.timeline}</div>
                  </div>
                `
                  )
                  .join("")}
              </div>
            </div>
          `;
        }

        // Kategori bazlƒ± saƒülƒ±k √∂nerileri
        const healthTips = getHealthTipsByCategory(category, bmi);
        if (healthTips.length > 0) {
          recommendationsHTML += `
            <div class="health-tips">
              <h5>üíä Saƒülƒ±klƒ± ${
                category === "Normal" ? "Kilo Koruma" : "Kilo Deƒüi≈üimi"
              } ƒ∞pu√ßlarƒ±</h5>
              <ul class="tips-list">
                ${healthTips.map((tip) => `<li>${tip}</li>`).join("")}
              </ul>
            </div>
          `;
        }

        resultDetails.innerHTML = recommendationsHTML;
      }

      // Kategori bazlƒ± saƒülƒ±k √∂nerileri
      function getHealthTipsByCategory(category, bmi) {
        const tips = {
          Zayƒ±f: [
            "G√ºnde 300-500 kalori fazla alarak saƒülƒ±klƒ± kilo artƒ±≈üƒ± hedefleyin",
            "Protein aƒüƒ±rlƒ±klƒ± beslenme: tavuk, balƒ±k, yumurta, kuruyemi≈ü t√ºketin",
            "Kuvvet antrenmanlarƒ± yaparak kas k√ºtlesi artƒ±rƒ±n",
            "Sƒ±k sƒ±k k√º√ß√ºk √∂ƒü√ºnler halinde beslenin (6-8 √∂ƒü√ºn)",
            "Saƒülƒ±klƒ± yaƒülar ekleyin: avokado, zeytinyaƒüƒ±, fƒ±ndƒ±k",
          ],
          Normal: [
            "Mevcut kilonuzu korumak i√ßin g√ºnl√ºk kalori dengesini saƒülayƒ±n",
            "Haftada 150 dakika orta ≈üiddetli egzersiz yapƒ±n",
            "Dengeli beslenme: sebze, meyve, tam tahƒ±l, protein",
            "Bol su i√ßin (g√ºnde 2-3 litre)",
            "D√ºzenli uyku alƒ±n (7-9 saat)",
          ],
          "Fazla Kilolu": [
            "G√ºnde 300-500 kalori a√ßƒ±ƒüƒ± yaratarak haftada 0.5kg verin",
            "Porsiyon kontrol√º yapƒ±n ve yava≈ü yiyin",
            "Kardiyovask√ºler egzersizleri artƒ±rƒ±n (y√ºr√ºy√º≈ü, ko≈üu, bisiklet)",
            "≈ûekerli i√ßecekleri ve i≈ülenmi≈ü gƒ±dalarƒ± azaltƒ±n",
            "Lif oranƒ± y√ºksek gƒ±dalar t√ºketin (sebze, meyve, tam tahƒ±l)",
          ],
          Obez: [
            "Doktor kontrol√ºnde sistematik kilo verme programƒ± ba≈ülatƒ±n",
            "Beslenme uzmanƒ±ndan destek alƒ±n",
            "D√º≈ü√ºk etkili egzersizlerle ba≈ülayƒ±n (y√ºr√ºy√º≈ü, y√ºzme)",
            "A≈üƒ±rƒ± kƒ±sƒ±tlayƒ±cƒ± diyetlerden ka√ßƒ±nƒ±n, s√ºrd√ºr√ºlebilir deƒüi≈üiklikler yapƒ±n",
            "Sosyal destek alƒ±n, ailenizi s√ºrece dahil edin",
          ],
        };

        return tips[category] || [];
      }

      // Modal dƒ±≈üƒ±na tƒ±klama ile kapatma
      window.onclick = function (event) {
        const modals = document.querySelectorAll(".modal");
        modals.forEach((modal) => {
          if (event.target === modal) {
            modal.style.display = "none";
          }
        });
      };

      // Sayfa yenilendiƒüinde achievement g√ºncelle
      window.addEventListener("beforeunload", function () {
        if (window.dashboardAPI && weightData.length > 0) {
          // Weight tracking achievement tetikle
          try {
            window.dashboardAPI.triggerAchievements();
          } catch (error) {
            // Sessizce devam et
          }
        }
      });

      // BMI progress bar'ƒ±nƒ± g√ºncelle
      function updateBMIProgress(bmi) {
        const bmiValueEl = document.getElementById("bmiValue");
        const bmiProgressBarEl = document.getElementById("bmiProgressBar");
        const bmiStatusEl = document.getElementById("bmiStatus");

        if (bmi) {
          bmiValueEl.textContent = bmi.toFixed(1);

          // BMI progress hesaplama
          let bmiProgress = 0;
          if (bmi < 18.5) {
            bmiProgress = (bmi / 18.5) * 40; // Zayƒ±f
          } else if (bmi <= 24.9) {
            bmiProgress = 40 + ((bmi - 18.5) / (24.9 - 18.5)) * 40; // Normal
          } else {
            bmiProgress = 80 + Math.min(((bmi - 24.9) / 10) * 20, 20); // Fazla kilolu+
          }

          bmiProgressBarEl.style.width = `${Math.min(bmiProgress, 100)}%`;

          // Progress bar rengini BMI kategorisine g√∂re deƒüi≈ütir
          if (bmi < 18.5) {
            bmiProgressBarEl.style.background =
              "linear-gradient(90deg, #f59e0b, #fbbf24)"; // Sarƒ±
            bmiStatusEl.textContent = "Zayƒ±f";
          } else if (bmi <= 24.9) {
            bmiProgressBarEl.style.background =
              "linear-gradient(90deg, #10b981, #34d399)"; // Ye≈üil
            bmiStatusEl.textContent = "Normal";
          } else if (bmi <= 29.9) {
            bmiProgressBarEl.style.background =
              "linear-gradient(90deg, #f97316, #fb923c)"; // Turuncu
            bmiStatusEl.textContent = "Fazla Kilolu";
          } else {
            bmiProgressBarEl.style.background =
              "linear-gradient(90deg, #ef4444, #f87171)"; // Kƒ±rmƒ±zƒ±
            bmiStatusEl.textContent = "Obez";
          }
        }
      }

      // Debug fonksiyonlarƒ± (geli≈ütirme i√ßin)
      window.weightTrackerDebug = {
        addSampleData: () => {
          const sampleWeights = [
            75.2, 74.8, 74.5, 74.1, 73.9, 73.6, 73.2, 72.8,
          ];
          const now = new Date();

          sampleWeights.forEach((weight, index) => {
            const date = new Date(now);
            date.setDate(date.getDate() - (sampleWeights.length - index));

            weightData.push({
              id: Date.now() + index,
              weight: weight,
              originalWeight: weight,
              unit: "kg",
              date: date.toISOString(),
              timestamp: date.getTime(),
            });
          });

          saveData();
          updateStats();
          updateHistory();
          updateChart();
          showNotification("√ñrnek veriler eklendi!");
        },

        clearData: () => {
          if (confirm("T√ºm veriler silinecek! Emin misiniz?")) {
            weightData = [];
            localStorage.removeItem("weightData");
            localStorage.removeItem("targetWeight");
            localStorage.removeItem("userHeight");
            location.reload();
          }
        },

        showData: () => {
          console.log("Weight Data:", weightData);
          console.log("Target Weight:", targetWeight);
          console.log("User Height:", userHeight);
        },
      };
    </script>
  </body>
</html>
